(function(){var c=null;function e(a){var b=j;function d(){}d.prototype=b.prototype;a.g=b.prototype;a.prototype=new d};var k=[[{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"grass"},{type:"grass"},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"}],[{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"},{},{type:"grass"},{type:"grass"},{},{type:"treem"},{},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{type:"wall"},{type:"wallEnd"},{type:"wallEnd"},{type:"wallEnd"},
{type:"wallEnd"},{type:"wallEnd"},{type:"wall"},{type:"treem"},{},{},{},{},{},{},{},{},{type:"treem"},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{type:"wall"},{type:"grass"},{type:"grass"},{type:"grass"},{type:"grass"},{type:"grass"},{type:"wall"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"},{},{type:"treem"}],[{type:"treem"},{},{type:"wall"},{type:"grass"},{type:"house"},{type:c},{type:c},{type:"grass"},{type:"wall"},{},{},{},{},{},{},{},{},{},{type:"treem"},{},{},{},
{},{},{},{},{}],[{type:"treem"},{},{type:"wall"},{type:"grass"},{type:c},{type:c},{type:c},{type:"grass"},{type:"wallEnd"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{type:"treem"},{},{type:"wallEnd"},{type:"grass"},{type:c},{type:c},{type:c},{type:"grass"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"},{},{},{},{}],[{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{type:"treem"},{},{type:"treem"},{},{},{},
{},{},{},{},{},{},{},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{},{},{},{},{type:"grass"},{type:"grass"},{},{},{},{},{},{},{type:"treem"},{},{type:"treem"},{},{type:"grass"},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{type:"treem"},{},{},{},{},{},{type:"treem"},{},{},{},{},{},{},{type:"treem"},{},{},{},{type:"grass"},{},{},{},{},{},{},{type:"treem"}],[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"grass"},{type:"grass"},
{},{},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"}],[{},{},{},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{type:"treem"},{},{},{},{},{type:"grass"},{},{},{},{},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{type:"treem"}],[{},{},{},{},{},{type:"grass"},{},{},{},{},{},{type:"grass"},
{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"}],[{},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"}]];function j(a,b,d){this.type=a;this.f=this.a=!1;this.x=b;this.y=d;this.b=Math.floor((d+60)/60)-1;this.c=Math.floor((b+60)/60)-1;if(a)a=new paper.Raster(a),a.position=new paper.Point(a.size.width/2+b,a.size.height/2+d)}j.prototype.log=function(a){window.console&&window.console.log&&window.console.log(a)};function l(a){j.call(this,c,0,0);this.a=a;this.f=!0}e(l);function m(a,b){j.call(this,"treem",a,b);this.a=!0;if(k[this.b+1])k[this.b+1][this.c].type?k[this.b+1][this.c].a=!1:k[this.b+1][this.c]={type:"",item:new l(!1)};if(k[this.b+1]&&k[this.b+1][this.c+1])k[this.b+1][this.c+1].type?k[this.b+1][this.c+1].a=!1:k[this.b+1][this.c+1]={type:"",item:new l(!1)}}e(m);function n(a,b){j.call(this,"grass",a,b);this.a=!0}e(n);function o(){}
o.prototype.draw=function(){paper.project.activeLayer.removeChildren();var a=new paper.Raster("female");a.position=new paper.Point(a.size.width/2+600,a.size.height/2+600);var b={e:c,d:0};(new paper.Tool).onKeyDown=function(a){if(b.d==0)b.e=a.key,b.d=60};p();q();r();window.console&&window.console.log&&window.console.log(k);var d=new Date,h=0,f=new paper.PointText({content:"FPS (0)",point:new paper.Point(20,30),fillColor:"black"});paper.view.onFrame=function(){h++;var i=new Date,g=1E3/(i-d);d=i;if(h>=
5)f.content="FPS ("+Math.round(g).toString()+")",h=0;if(b.d>0){if(b.e=="right"){if(b.d==60&&(i=k[Math.floor(a.position.y/60)][Math.floor((a.position.x+60)/60)])&&i.item&&!i.item.a){b.e=c;b.d=0;return}a.position.x+=4}b.e=="left"&&(a.position.x-=4);b.e=="up"&&(a.position.y-=4);b.e=="down"&&(a.position.y+=4);b.d-=4}}};function p(){for(var a=Math.round(paper.view.size.width/60),b=0,d=Math.round(paper.view.size.height/60);b<d;b++){k[b]||(k[b]=[]);for(var h=0,f=a;h<f;h++)k[b][h]||(k[b][h]={})}}
function q(){for(var a=0,b=0,d=0,h=k.length;d<h;d++){for(var f=0,i=k[d].length;f<i;f++){var g=k[d][f];if(!g.item||g.item&&g.item.f){if(g.type=="grass")k[d][f].item=new n(a,b);else if(g.type=="treem")k[d][f].item=new m(a,b);else if(g.type)k[d][f].item=new j(g.type,a,b);if(g.a!=void 0)k[d][f].item.a=g.a}a+=60}a=0;b+=60}}
function r(){for(var a=60,b=60;;)if((new paper.Path.Line(new paper.Point(0,b),new paper.Point(paper.view.size.width,b))).strokeColor="#5BB01B",b+=60,b>paper.view.size.height)break;for(;;)if((new paper.Path.Line(new paper.Point(a,0),new paper.Point(a,paper.view.size.height))).strokeColor="#5BB01B",a+=60,a>paper.view.size.width)break}var s=new o;paper.setup(document.getElementById("canvas"));s.draw();paper.view.draw();paper.view.play();paper.view.onResize=function(){s.draw()};})();

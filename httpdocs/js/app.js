(function(){var d=null;function f(a){var b=i;function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c};function i(a,b,c){this.type=a;this.g=this.c=!1;this.x=b;this.y=c;this.d=Math.floor((c+60)/60)-1;this.e=Math.floor((b+60)/60)-1;if(a)a=new paper.Raster(a),a.position=new paper.Point(a.size.width/2+b,a.size.height/2+c)};function j(a,b){i.call(this,"grass",a,b);this.c=!0}f(j);var k=[[{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"grass"},{type:"grass"},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"}],[{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"},{},{type:"grass"},{type:"grass"},{},{type:"treem"},{},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{type:"wall"},{type:"wallEnd"},{type:"wallEnd"},{type:"wallEnd"},
{type:"wallEnd"},{type:"wallEnd"},{type:"wall"},{type:"treem"},{},{},{},{},{},{},{},{},{type:"treem"},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{type:"wall"},{type:"grass"},{type:"grass"},{type:"grass"},{type:"grass"},{type:"grass"},{type:"wall"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"},{},{type:"treem"}],[{type:"treem"},{},{type:"wall"},{type:"grass"},{type:"house"},{type:d},{type:d},{type:"grass"},{type:"wall"},{},{},{},{},{},{},{},{},{},{type:"treem"},{},{},{},
{},{},{},{},{}],[{type:"treem"},{},{type:"wall"},{type:"grass"},{type:d},{type:d},{type:d},{type:"grass"},{type:"wallEnd"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{type:"treem"},{},{type:"wallEnd"},{type:"grass"},{type:d},{type:d},{type:d},{type:"grass"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"},{},{},{},{}],[{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{type:"treem"},{},{type:"treem"},{},{},{},
{},{},{},{},{},{},{},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{},{},{},{},{type:"grass"},{type:"grass"},{},{},{},{},{},{},{type:"treem"},{},{type:"treem"},{},{type:"grass"},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{type:"treem"},{},{},{},{},{},{type:"treem"},{},{},{},{},{},{},{type:"treem"},{},{},{},{type:"grass"},{},{},{},{},{},{},{type:"treem"}],[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"grass"},{type:"grass"},
{},{},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"}],[{},{},{},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"}],[{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{type:"treem"},{},{},{},{},{type:"grass"},{},{},{},{},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{type:"treem"}],[{},{},{},{},{},{type:"grass"},{},{},{},{},{},{type:"grass"},
{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"}],[{},{},{type:"treem"},{},{type:"treem"},{},{type:"treem"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{type:"treem"}]];function m(a){i.call(this,d,0,0);this.c=a;this.g=!0}f(m);function n(a,b){i.call(this,"treem",a,b);this.c=!0;if(k[this.d+1])k[this.d+1][this.e].type?k[this.d+1][this.e].c=!1:k[this.d+1][this.e]={type:"",item:new m(!1)};if(k[this.d+1]&&k[this.d+1][this.e+1])k[this.d+1][this.e+1].type?k[this.d+1][this.e+1].c=!1:k[this.d+1][this.e+1]={type:"",item:new m(!1)}}f(n);function o(){this.a=new paper.Raster("female");this.a.position=new paper.Point(this.a.size.width/2+600,this.a.size.height/2+600);this.move={b:d,f:0};var a=this;(new paper.Tool).onKeyDown=function(b){if(a.move.f==0)a.move.b=b.key,a.move.f=60}}
o.prototype.onFrame=function(){var a;if(a=this.move.f>0)a:{if(this.move.f==60){a=Math.floor(this.a.position.x/60);this.move.b=="right"?a=Math.floor((this.a.position.x+60)/60):this.move.b=="left"&&(a=Math.floor((this.a.position.x-60)/60));var b=Math.floor(this.a.position.y/60);this.move.b=="up"?b=Math.floor((this.a.position.y-60)/60):this.move.b=="down"&&(b=Math.floor((this.a.position.y+60)/60));if((a=k[b][a])&&a.item&&!a.item.c){this.move.b=d;this.move.f=0;a=!1;break a}}a=!0}a&&(this.move.b=="right"&&
(this.a.position.x+=4),this.move.b=="left"&&(this.a.position.x-=4),this.move.b=="up"&&(this.a.position.y-=4),this.move.b=="down"&&(this.a.position.y+=4),this.move.f-=4)};function p(){}p.prototype.draw=function(){paper.project.activeLayer.removeChildren();var a=new o;q();r();s();var b=new Date,c=0,h=new paper.PointText({content:"FPS (0)",point:new paper.Point(20,30),fillColor:"black"});paper.view.onFrame=function(){c++;var e=new Date,l=1E3/(e-b);b=e;if(c>=5)h.content="FPS ("+Math.round(l).toString()+")",c=0;a.onFrame()}};
function q(){for(var a=Math.round(paper.view.size.width/60),b=0,c=Math.round(paper.view.size.height/60);b<c;b++){k[b]||(k[b]=[]);for(var h=0,e=a;h<e;h++)k[b][h]||(k[b][h]={})}}function r(){for(var a=0,b=0,c=0,h=k.length;c<h;c++){for(var e=0,l=k[c].length;e<l;e++){var g=k[c][e];if(!g.item||g.item&&g.item.g){if(g.type=="grass")k[c][e].item=new j(a,b);else if(g.type=="treem")k[c][e].item=new n(a,b);else if(g.type)k[c][e].item=new i(g.type,a,b);if(g.c!=void 0)k[c][e].item.c=g.c}a+=60}a=0;b+=60}}
function s(){for(var a=60,b=60;;)if((new paper.Path.Line(new paper.Point(0,b),new paper.Point(paper.view.size.width,b))).strokeColor="#5BB01B",b+=60,b>paper.view.size.height)break;for(;;)if((new paper.Path.Line(new paper.Point(a,0),new paper.Point(a,paper.view.size.height))).strokeColor="#5BB01B",a+=60,a>paper.view.size.width)break}var t=new p;paper.setup(document.getElementById("canvas"));t.draw();paper.view.draw();paper.view.play();paper.view.onResize=function(){t.draw()};})();
